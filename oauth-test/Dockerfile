FROM python:3.7.9

RUN mkdir -p /root/.ssh
RUN tee /root/.ssh/TEMP.pem <<EOF
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAn0shr3TklDyNG6AYtHb68KqbrKQQBZLXDRxmEnFi3ZLod4Qk
Dyu4hLuMnrVJ1H8vfUegissyLTLEmnCPXHPJgL9fA4P4PVBRLphGVSw0EsVBxiHf
Z3Zj+DBs2JZfVWle10G1CsSLdV4FZ7AtrejKsGUGu0xL8pXSJokiW3eeEUakQetf
6JlqFMqR3i2Tyn/9tWClsMfiEpYeJblR8lR2KtJ53CHSUeCJkEKA4yqTyMPlXDUK
j5huSpOoQDkoc8JmhRAEIk2MoXYSoEXs2bBL1I1tnAF7XREhaOvACXT/uCWC5LW5
YUCe808jB/PFweIkFo9WRi1o4AVIwufwxg9kdwIDAQABAoIBADu78OXa79ym2EOD
xb/m3jNhxv72hwuQBRTlkWFZI7nzXTl0VBFcU9Vyf0kEsqr9BtH0CkAB8s8AOrmv
fBMvWGDvYrHuyygy9j6C290UtnJThlbGXQBvZQ2tGyQdP6LH4MjX2wwuqB1bJKu9
ZWPR6DA9skiKU/CkPio1Qq0KLjxLqPW/NGRHa2ZXWPpZN7+eea0TTXiwTpcVFSfe
fouvwVwWY2wzQjvfr+PT7uU3x4j3YcCuzfGNZbI+cQvgrlh36kt7gOEey+8yIc/N
QJ+COK5XKOfTiwyovkKx5oFy9Z4E0C3kIE9YP1YyRLynylp+ii9MQdrdgUrHRVhz
Ig0OAAECgYEA4QL4qIla4Kav5ljbbJPn6Wfr1iJSuUNVibxtDyF8817PIaZsCLIK
/Erfg6BeMsWcf4M3Z3awcD0NjhzV6W62/RqJ21rKdlDwns3UA5QgJZBtjkLsn+2y
VdU8/zE1rLFkO8G9XVJI+AqoPV2KreH3C6SgW/F6fSE78dww2MV0hcsCgYEAtTsy
RwCfCklorVYhoZ8He4P83hklwBDhc8bChwsGtVcZWYQj+Hd7GJFYy1UP6avU8+4m
0W1JwA57EV0z+RdQDLbMB9CD84CKm81JvXjd5cKgTAZzqRl/WR/Y/aSmFYQldpvC
NjBg1Rd38y1Hr9nTYU0Id0G0oKiygTzLJqrFZoUCgYEAzLeRWHUvc3j0TJTHfi/L
LbZZAUfVD61NY7VFXCDRt/KobSsm23pxOD0+wljjmznjOrg9biq0OEmzzXo6vNj4
L6s3hZVC4wadBT6rCF56KPMQWgBVnOP7/s+1YVB6TxZN5XhNO1yj+thnXP2AMNeH
ltY+96fqE3JrQY9d+bscWqUCgYBn6xCyS/XmBR/jvK6+KR02QwGdLNhLoKJWK9Nh
cf4fv1jGzpF9qK1J8hXzScw9Fg2e7aEOl1chrGv/Ee16WFbLY4nstTDkUIGqQvWU
kpjSZV5bGZv6i6dNKIjZMC8XyVVeBIRBZE4yAioCo6UmfYXKlkxTbbawJOtuVbi7
bFKSrQKBgCCI2nDClAKMThkrBmryx5Vm0ForVtIzBUufRFbFVAJcIq4i4/rVWC60
eOhSyf/49RAYJoJ/pIIMXwgvfIXoR7ogb3TcAh4OcnEjkqE8IhG7ksWUkyszP9rk
OW6qtBnz6K0msLg9Bjq0wMJSjsAJTJyRIKeIu9SIqdvXdNCjTRZL
-----END RSA PRIVATE KEY-----
EOF
chmod 600 /root/.ssh/TEMP.pem

WORKDIR /app

COPY requirements.txt requirements.txt
RUN pip3 install -r requirements.txt


COPY . .

CMD [ "python3", "-m" , "flask", "run", "--host=0.0.0.0",  "--port=443", "--cert=adhoc"]